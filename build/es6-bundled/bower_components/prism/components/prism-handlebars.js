(function(a){var b=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/;a.languages.handlebars=a.languages.extend('markup',{handlebars:{pattern:b,inside:{delimiter:{pattern:/^\{\{\{?|\}\}\}?$/i,alias:'punctuation'},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b-?(?:0x[\dA-Fa-f]+|\d*\.?\d+(?:[Ee][+-]?\d+)?)\b/,boolean:/\b(?:true|false)\b/,block:{pattern:/^(\s*~?\s*)[#\/]\S+?(?=\s*~?\s*$|\s)/i,lookbehind:!0,alias:'keyword'},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~\s]+/}}}),a.languages.insertBefore('handlebars','tag',{"handlebars-comment":{pattern:/\{\{![\s\S]*?\}\}/,alias:['handlebars','comment']}}),a.hooks.add('before-highlight',function(c){'handlebars'!==c.language||(c.tokenStack=[],c.backupCode=c.code,c.code=c.code.replace(b,function(d){for(var e=c.tokenStack.length;-1!==c.backupCode.indexOf('___HANDLEBARS'+e+'___');)++e;return c.tokenStack[e]=d,'___HANDLEBARS'+e+'___'}))}),a.hooks.add('before-insert',function(c){'handlebars'===c.language&&(c.code=c.backupCode,delete c.backupCode)}),a.hooks.add('after-highlight',function(c){if('handlebars'===c.language){for(var d=0,e=Object.keys(c.tokenStack);d<e.length;++d){var f=e[d],g=c.tokenStack[f];c.highlightedCode=c.highlightedCode.replace('___HANDLEBARS'+f+'___',a.highlight(g,c.grammar,'handlebars').replace(/\$/g,'$$$$'))}c.element.innerHTML=c.highlightedCode}})})(Prism);